<%= content_for :jj do %>
    <script src="/assets/testing/dashboard/javascripts/application.js" type="text/javascript"></script>
    <%= javascript_include_tag "jquery.dataTables.min" %>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<% end %>



<div class="container-fluid">
    <div class="row-fluid">
        <div class="span7">
          <div class="row-fluid">
            <%= render :partial => "list" %>
          </div>

          <div class="black-box tex">
            <div class="tab-header">Meeting new</div>
            <ul class="recent-comments">
              <li class="separator">
                <%= form_for :meeting, :html => {:id => "meeting_form", :class => "fill-up cmxform"} do |f| %>
                    <%= f.hidden_field :user_id, :value => current_user.id %><br>
                    <%= f.time_select :start_time,
                                      :combined => true,
                                      :minute_interval => 30,
                                      :time_separator => "",
                                      :start_hour => 10,
                                      :end_hour => 19, :'data-mini' => true, :prompt => "Select Time" %><br>
                    <%= f.select :location, options_for_select(@conference.locations.map { |l| [l.name, l.id] }), :prompt => "Select Location" %><br>
                    <%= f.text_field :name, :placeholder => "Enter meeting agenda", :class => "required" %><br>
                <% end %>

                    <div class="box" style="position:relative;padding: 10px;color: black;" id="check_boxing">
                      <table class="table  data-table dataTable">
                        <thead>
                        <tr class="gradeA odd">
                          <th>Invitees</th>
                          <th>Select</th>
                          <th class="industry">Industry</th>
                          <th class="industry">Interest</th>
                          <th class="industry">Skills</th>
                          <th class="industry">Location</th>
                          <th class="industry">Email</th>
                          <th class="industry">Headline</th>
                          <th class="industry">Company</th>
                          <th class="industry">Role</th>
                        </tr>
                        </thead>
                        <tbody role="alert" aria-live="polite" aria-relevant="all">
                        <% @users = User.all %>
                        <% @use = @users - [current_user] %>
                        <% @use.each do |e| %>
                            <tr class="gradeX"  id="<%= e.id %>">
                              <td><%= e.name %></td>
                              <td><input type="checkbox" class="custom"/></td>
                              <td class="industry"><%= e.industry %></td>
                              <td class="industry"><%= e.interest %></td>
                              <td class="industry"><%= e.skills %></td>
                              <td class="industry"><%= e.location %></td>
                              <td class="industry"><%= e.email %></td>
                              <td class="industry"><%= e.headline %></td>
                              <td class="industry"><%= e.company %></td>
                              <td class="industry"><%= e.role %></td>
                            </tr>
                        <% end %>
                        </tbody>
                      </table>
                    </div>
                    <br>
                    <a  href="#" class="form_btn button gray" id="form_btn_id">Create</a>
              </li>
            </ul>

          </div>
          </div>

        <div class="span5">
          <div class="row-fluid">
            <div class="span12">
              <%= render :partial => "event_wall" %>
            </div>
          </div>
        </div>

        <div class="span5">
          <div class="row-fluid">
            <div class="span12">
              <%= render :partial => "splash_zone" %>
            </div>
          </div>
        </div>

    </div>



    <style type="text/css">
        .black-box .separator a {
            color: black;
        }
    </style>


    <script type="text/javascript">

        $('#form_btn_id').click(function(){
            if (($(":checkbox").filter(":checked").size()==0))
            {
            <%= add_gritter("Please Select Invitees", :title => "Error!",:image => :warning,:time => 2000  ) %>
            }
            else if ($("#meeting_start_time_5i").val()==""){
            <%= add_gritter("Please Select Time", :title => "Error!",:image => :warning,:time => 2000  ) %>
            }
            else if ($("#meeting_location").val()==""){
            <%= add_gritter("Please Select Location", :title => "Error!",:image => :warning,:time => 2000  ) %>
            }
            else if ($('#meeting_name').val()==""){
            <%= add_gritter("Please Fill Meeting Agenda", :title => "Error!",:image => :warning,:time => 2000  ) %>
            }
            else
            {
                $('#meeting_form').attr({
                    action:'meetings_create',
                    method:'post'
                });
            <%= add_gritter("Meeting was successfully created", :title => "Success",:image => :success,:time => 1000) %>
                setTimeout(function(){
                    $('#meeting_form').submit();

                },2000);


            }
        });




        $(function () {

            $(".industry").hide();

            $('.custom').live('click', function () {
                var checked;
                if ($(this).is(':checked')) {
                    checked = true;
                    var adding = ($(this).parent().parent().attr('id'));
                    var b = ($(this).parent().parent().find('#delegates_name').text());
                    $('#search_delegates').text().replace(/Delegates/, "");
                    $('#search_delegates').html($('#search_delegates').text().replace(/Delegates/, "") + b + ", ");
                    $('#meeting_form').append('<input id=' + adding + ' type="hidden" name="meeter_users[]" value=' + adding + '>');
                }

                else {
                    checked = false;
                    var deleting = ($(this).parent().parent().attr('id'));
                    var string = $(this).parent().parent().find('#delegates_name').text();
                    var new_string = $('#search_delegates').text().replace(string + ",", '');
                    $('#search_delegates').text(new_string);
                    $('#meeting_form').find('#' + deleting).empty().remove();
                }

            });
        });



        $(function () {

            $('[type="submit"]').button('disable');
            $(function () {
                $('[type="submit"]').button('disable');
                $('select').change && $('#meeting_name').focus(function () {
                    if (($('select option:selected') && $('#meeting_name')).length > 0) {
                        $('[type="submit"]').button('enable');

                    } else {
                        $('[type="submit"]').button('disable');

                    }
                });

            });

            $('#meeting_name').blur(function () {
                if ($(this).val().length <= 0) {
                    $('[type="submit"]').button('disable');
                }
                else {
                    $('[type="submit"]').button('enable');
                }
            });

        });


    </script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-41279198-1', '127.0.0.1:3000');
        ga('send', 'pageview');

    </script>

</div>




