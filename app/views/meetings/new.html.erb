<%= content_for :page_title do %>
    New Meeting
<% end %>

<%= content_for :head do %>
    <script type="text/javascript">

        $(function () {
            $('[type="submit"]').button('disable');
            $(function () {
                $('[type="submit"]').button('disable');
                $('select').change && $('#meeting_name').focus(function () {
                    if (($('select option:selected') && $('#meeting_name')).length > 0) {
                        $('[type="submit"]').button('enable');
                    } else {
                        $('[type="submit"]').button('disable');
                    }
                });
            });


            $('#meeting_name').blur(function () {
                if ($(this).val().length <= 0) {
                    $('[type="submit"]').button('disable');
                }
                else {
                    $('[type="submit"]').button('enable');
                }
            });
        });


    </script>
<% end %>


<style type="text/css">
    input.custom
    {
        width: 20px;
        height: 20px;
    }
</style>








<%= form_for :meeting, :html => {:id => "meeting_form"}, :url => {:action => :create} do |f| %>

    <%= f.hidden_field :user_id, :value => current_user.id %>
    <div data-role="controlgroup" data-type="horizontal" data-mini="true">
      <%= f.time_select :start_time,
                        :combined => true,
                        #:default => Time.now.change(:hour => 11, :min => 30),
                        :minute_interval => 30,
                        :time_separator => "",
                        :start_hour => 00,
                        :end_hour => 23, :'data-mini' => true, :prompt => "Select Time" %>
    </div>

    <div class="field">
      <%= f.select :location, options_for_select(@conference.locations.map { |l| [l.name, l.id] }), :'data-mini' => true, :prompt => "Select Location" %>
    </div>

    <!--<div id="location_text" style="display:none"><textarea rows="4" cols="5"></textarea></div>-->

    <div class="field" style="font-size: 0.8em;">
      <%= f.text_field :name, :placeholder => "Enter meeting agenda", :'data-mini' => true %>
    </div>

    <%#= f.submit "Send", :'data-role' => "button", :'data-ajax' => "false", :'data-mini' => true %>



<% end %>

<br>

<div data-role="collapsible" data-theme="a" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-inset="false" data-mini="true" data-filter="true">
  <h3 style="font-size: 0.8em;">
    <div id="search_delegates" class="search_dele">Select Invitees</div>
  </h3>
  <ul data-role="listview" data-theme="a" data-divider-theme="d" data-split-icon='star' data-mini="true" data-filter="true">
    <% @users = User.all  %>
    <% @use = @users - [current_user]  %>
    <% @use.sort_by(&:name).each_with_index do |e,index| %>
        <% @a=1 %>
        <li id="<%= e.id %>" class="li_delegate" data-filtertext=" <%= e.name %> <%= e.role %> <%= e.headline %> <%= e.industry %> <%= e.company %> <%= e.location %> <%= e.email %> <%= e.skills %> <%= e.interest %>"  >
          <div data-role="fieldcontain">
            <fieldset data-role="controlgroup">
              <label id="delegates_name"><input type="checkbox" name="checkbox-0" class=" checking_checkbox"/><%= e.name %></label>
            </fieldset>
          </div>
        </li>
    <% end %>
  </ul>
</div>
<br>

<div data-role="controlgroup" data-type="horizontal" style="float: right;">
  <a class="index_styling" href="#" data-ajax=false data-role="button" class="form_btn" id="form_btn_id" data-mini="true">Send</a>
</div>
<script type="text/javascript">

    $(document).on("pageinit", function(){
        $( ".checking_checkbox" ).on( "change", function() {
            if (  $(this).is(":checked") ) {

                var adding = $( this ).parents( "li").attr("id");
                var b = ($(this).parent().parent().find('#delegates_name').text());
                $('#search_delegates').text().replace(/Select Invitees/, "");
                $('#search_delegates').html($('#search_delegates').text().replace(/Select Invitees/, "") + b + ", ");
                $('#meeting_form').append('<input id=' + adding + ' type="hidden" name="meeter_use[]" value=' + adding + '>');
            }
            else {

                var deleting = $( this ).parents( "li").attr("id");
                var string = $(this).parent().parent().find('#delegates_name').text();
                var new_string = $('#search_delegates').text().replace(string + ",", '');
                $('#search_delegates').text(new_string);
                if ($('#search_delegates').text()==" ") {
                    $('#search_delegates').text("Select Invitees");
                }
                $('#meeting_form').find('#' + deleting).empty().remove();
            }
        });
    });








    $('#meeting_location').change(function(){
        if ($("#meeting_location :selected").text()=="Others") {
            $('#location_text').show();
        }
        else {
            $('#location_text').hide();
        }
    });



    $('#form_btn_id').click(function(){
        if (($(":checkbox").filter(":checked").size()==0))
        {
        <%= add_gritter("Please select Delegates", :title => "Error!",:image => :warning,:time => 2000  ) %>
        }
        else if ($("#meeting_start_time_5i").val()==""){
        <%= add_gritter("Please select Time", :title => "Error!",:image => :warning,:time => 2000  ) %>
        }
        else if ($("#meeting_location").val()==""){
        <%= add_gritter("Please select Location", :title => "Error!",:image => :warning,:time => 2000  ) %>
        }
        else if ($('#meeting_name').val()==""){
        <%= add_gritter("Please fill meeting Agenda", :title => "Error!",:image => :warning,:time => 2000  ) %>
        }
        else
        {
            $('#meeting_form').submit();

        }
    });



</script>



















<!--<form>-->

<!--<label for="select-choice-9" class="select" data-filter="true"><strong> To:</strong></label>-->
<!--<select name="select-choice-9" id="select-choice-9" multiple="multiple" data-native-menu="false"  >-->
<!--<option>Choose recepients</option>-->
<!--<option value="standard">Rakesh</option>-->
<!--<option value="rush">Inder</option>-->
<!--<option value="express">Perseus</option>-->
<!--<option value="overnight">Lolly</option>-->
<!--</select>-->



<!--<label for="select-choice-0" class="select"><b>Day:</b></label>-->
<!--<select name="select-choice-0" id="select-choice-0">-->
<!--<option value="standard">Day one</option>-->
<!--<option value="rush">Day two</option>-->
<!--<option value="express">Day three</option>-->
<!--<option value="overnight">Day four</option>-->
<!--</select>-->



<!--<label for="mydate" ><b>Time:</b></label>-->
<!--<input id="i" name="i">-->


<!--<label for="select-choice-1" class="select"><b>Location:</b></label>-->
<!--<select name="select-choice-0" id="select-choice-1">-->
<!--<option value="standard">wing one</option>-->
<!--<option value="rush">wing two</option>-->
<!--<option value="express">wing three</option>-->
<!--<option value="overnight">wing four</option>-->
<!--</select>-->



<!--<label for="basic"><b>Description:</b></label>-->
<!--<textarea name="textarea" id="textarea"></textarea>-->


<!--<div data-role="controlgroup" data-type="horizontal" style="float: right;">-->
<!--<a href="#" data-role="button">Send</a>-->
<!--<a href="#" data-role="button">Cancel</a>-->
<!--</div>-->


<!--</form>-->






